<div class="meeting-wrapper">
    <!-- Header / Nav -->
    <header class="navbar">
        <div class="logo">Meet<span>X</span></div>
        <div class="room-info" *ngIf="roomId">
            <span class="room-id">Room: {{ roomId }}</span>
            <button class="btn-copy" (click)="copyMeetingLink()" title="Copy Link">
                ğŸ“‹
            </button>
        </div>
    </header>

    <main class="main-content">
        <!-- Setup Screen -->
        <div class="setup-container" *ngIf="!roomId">
            <div class="setup-card">
                <h1>Welcome to MeetX</h1>
                <p>Start a new meeting or join an existing one.</p>

                <div class="setup-actions">
                    <button class="btn-primary" (click)="startMeeting()">
                        <span>ğŸš€</span> Start Meeting
                    </button>
                    <div class="divider"><span>OR</span></div>
                    <div class="join-group">
                        <input [(ngModel)]="joinRoomId" placeholder="Enter Room ID or Link" />
                        <button class="btn-secondary" (click)="joinMeeting()">Join</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Video Grid Container -->
        <div class="video-grid-container" *ngIf="roomId">
            <div class="video-grid" [class.single]="participants.size === 0">
                <!-- Local Video -->
                <div class="video-wrapper local">
                    <video #localVideo autoplay muted playsinline></video>
                    <div class="video-label">You (Self)</div>
                    <div class="status-icons">
                        <span [class.off]="!cameraOn">{{ cameraOn ? 'ğŸ“·' : 'ğŸ“¹' }}</span>
                        <span [class.off]="!micOn">{{ micOn ? 'ğŸ¤' : 'ğŸ”‡' }}</span>
                    </div>
                </div>

                <!-- Remote Videos -->
                <div class="video-wrapper remote" *ngFor="let participant of participants.values()">
                    <video [srcObject]="participant.stream" autoplay playsinline></video>
                    <div class="video-label">Peer {{ participant.id.substring(0, 4) }}</div>
                    <div class="status-icons">
                        <span [class.off]="!participant.cameraOn">{{ participant.cameraOn ? 'ğŸ“·' : 'ğŸ“¹' }}</span>
                        <span [class.off]="!participant.micOn">{{ participant.micOn ? 'ğŸ¤' : 'ğŸ”‡' }}</span>
                    </div>
                </div>
            </div>

            <!-- Controls Overlay -->
            <div class="bottom-controls">
                <div class="control-group">
                    <button class="control-btn" [class.off]="!micOn" (click)="toggleMic()">
                        {{ micOn ? 'ğŸ¤' : 'ğŸ”‡' }}
                    </button>
                    <button class="control-btn" [class.off]="!cameraOn" (click)="toggleCamera()">
                        {{ cameraOn ? 'ğŸ“·' : 'ğŸ“¹' }}
                    </button>
                    <button class="control-btn share" (click)="shareScreen()">
                        ğŸ–¥ï¸
                    </button>
                    <button class="control-btn hangup" (click)="roomId = ''; participants.clear()">
                        ğŸ“
                    </button>
                </div>
            </div>
        </div>
    </main>
</div>